<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Travel</title>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <!-- êµ¬ê¸€í°íŠ¸ -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic+Coding:wght@700&family=Noto+Sans+KR:wght@300&display=swap"
              rel="stylesheet">
        <style>
            html {
                height: 100%;
                width: 100%;
            }

            * {
                font-family: 'Noto Sans KR', sans-serif;
            }

            .wrap {
                width: 700px;
                margin: 10px auto;

            }

            #button {
                width: 100px;
                height: 53px;
                margin: 50px auto;
            }


        </style>
        <script>

            function get1() {
                $('#spot1-lat').val(lat);
                $('#spot1-lng').val(lng);
            }

            function get2() {
                $('#spot2-lat').val(lat);
                $('#spot2-lng').val(lat);
            }

            function get3() {
                $('#spot3-lat').val(lat);
                $('#spot3-lng').val(lat);
            }

            function formCheck() {
                let name = $('#name').val();
                let emoji = $('#emoji').val();
                let spot1 = $('#spot1').val();
                let spot1_lat = $('#spot1-lat').val();
                let spot1_lng = $('#spot1-lng').val();
                let spot2 = $('#spot2').val();
                let spot2_lat = $('#spot2-lat').val();
                let spot2_lng = $('#spot2-lng').val();
                let spot3 = $('#spot3').val();
                let spot3_lat = $('#spot3-lat').val();
                let spot3_lng = $('#spot3-lng').val();


                if (name == '') {
                    alert('ì´ë¦„ì„ ì ì–´ì£¼ì„¸ìš”âœ')
                    return
                } else if (emoji == 'none') {
                    alert('ì´ëª¨ì§€ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”ğŸˆ')
                    return
                } else if (spot1 == '') {
                    alert('ì—¬í–‰ì§€ë¥¼ ì ì–´ì£¼ì„¸ìš”ğŸš')
                    return
                } else if (spot2 == '') {
                    alert('ì—¬í–‰ì§€ë¥¼ ì ì–´ì£¼ì„¸ìš”ğŸš')
                    return
                } else if (spot3 == '') {
                    alert('ì—¬í–‰ì§€ë¥¼ ì ì–´ì£¼ì„¸ìš”ğŸš')
                    return
                } else {
                    alert('ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!ğŸ‘')

                }
                $.ajax({
                    type: "POST",
                    url: "/themes",
                    data: {
                        name: name,
                        emoji: emoji,
                        spot1: spot1,
                        spot1_lat: spot1_lat,
                        spot1_lng: spot1_lng,
                        spot2: spot2,
                        spot2_lat: spot2_lat,
                        spot2_lng: spot2_lng,
                        spot3: spot3,
                        spot3_lat: spot3_lat,
                        spot3_lng: spot3_lng
                    },
                    success: function (response) {
                        if (response["result"] == "success") {
                            window.location.reload();
                        }
                    }
                })
            }

        </script>
    </head>


    <body>
        <section class="hero is-warning is-small" style="height: 100%">
            <div class="hero-body" style="margin-top:140px" ;>
                <div class="container has-text-centered" style="margin-bottom: 100px;">
                    <h1 class="title is-size-1">
                        ë‚˜ì˜ ì—¬í–‰ í…Œë§ˆ ë§Œë“¤ê¸°
                    </h1>
                </div>
            </div>
            <div class="wrap">
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">í…Œë§ˆ ì´ë¦„</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <input id="name" class="input" type="text" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">ì´ëª¨ì§€</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select id="emoji">
                                        <option value="none">ì„ íƒ</option>
                                        <option value="ğŸ˜€">ğŸ˜€</option>
                                        <option value="ğŸ˜">ğŸ˜</option>
                                        <option value="ğŸ˜‚">ğŸ˜‚</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label" onclick="get1()">ì—¬í–‰ì§€ 1</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot1" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot1-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot1-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get1()">
                                    í™•ì¸
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">ì—¬í–‰ì§€ 2</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot2" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot2-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot2-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get2()">
                                    í™•ì¸
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">ì—¬í–‰ì§€ 3</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot3" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot3-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot3-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get3()">
                                    í™•ì¸
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div id="map" style="width:650px;height:400px;margin:auto;"></div>
                <div id="button" class="field is-grouped">
                    <p class="control">
                        <button onclick="formCheck()" class="button is-info">
                            ë“±ë¡í•˜ê¸°
                        </button>
                    </p>
                    <p class="control">
                        <button onclick="location.href = '/'" class="button">
                            ëŒì•„ê°€ê¸°
                        </button>
                    </p>

                </div>
            </div>
        </section>
        <script type="text/javascript"
                src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ef40c66fba33237283cfb59ce3a907aa"></script>
        <script>
            let lat, lng; // Irvin: ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
            let mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div
                mapOption = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                    level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
                };

            let map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤


            // ì§€ë„ í™•ëŒ€ ì¶•ì†Œë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ”  ì¤Œ ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•©ë‹ˆë‹¤
            var zoomControl = new kakao.maps.ZoomControl();
            map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

            // ì§€ë„ë¥¼ í´ë¦­í•œ ìœ„ì¹˜ì— í‘œì¶œí•  ë§ˆì»¤ì…ë‹ˆë‹¤
            let marker = new kakao.maps.Marker({
                // ì§€ë„ ì¤‘ì‹¬ì¢Œí‘œì— ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
                position: map.getCenter()
            });
            // ì§€ë„ì— ë§ˆì»¤ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
            marker.setMap(map);

            // ì§€ë„ì— í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
            // ì§€ë„ë¥¼ í´ë¦­í•˜ë©´ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤
            kakao.maps.event.addListener(map, 'click', function (mouseEvent) {

                // í´ë¦­í•œ ìœ„ë„, ê²½ë„ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤
                let latlng = mouseEvent.latLng;

                // ë§ˆì»¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•œ ìœ„ì¹˜ë¡œ ì˜®ê¹ë‹ˆë‹¤
                marker.setPosition(latlng);

                lat = latlng.getLat();
                lng = latlng.getLng();
                /*var message = 'í´ë¦­í•œ ìœ„ì¹˜ì˜ ìœ„ë„ëŠ” ' + latlng.getLat() + ' ì´ê³ , ';
                message += 'ê²½ë„ëŠ” ' + latlng.getLng() + ' ì…ë‹ˆë‹¤';

                var resultDiv = document.getElementById('clickLatlng');
                resultDiv.innerHTML = message;*/

            });


        </script>
    </body>
</html>