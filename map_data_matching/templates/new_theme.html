<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Travel</title>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <!-- Íµ¨Í∏ÄÌè∞Ìä∏ -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic+Coding:wght@700&family=Noto+Sans+KR:wght@300&display=swap"
              rel="stylesheet">
        <style>
            html {
                height: 100%;
                width: 100%;
            }

            * {
                font-family: 'Noto Sans KR', sans-serif;
            }

            .wrap {
                width: 700px;
                margin: 10px auto;

            }

            #button {
                width: 100px;
                height: 53px;
                margin: 50px auto;
            }


        </style>
        <script>

            function get1() {
                $('#spot1-lat').val(lat);
                $('#spot1-lng').val(lng);
            }

            function get2() {
                $('#spot2-lat').val(lat);
                $('#spot2-lng').val(lat);
            }

            function get3() {
                $('#spot3-lat').val(lat);
                $('#spot3-lng').val(lat);
            }

            function formCheck() {
                let name = $('#name').val();
                let emoji = $('#emoji').val();
                let spot1 = $('#spot1').val();
                let spot1_lat = $('#spot1-lat').val();
                let spot1_lng = $('#spot1-lng').val();
                let spot2 = $('#spot2').val();
                let spot2_lat = $('#spot2-lat').val();
                let spot2_lng = $('#spot2-lng').val();
                let spot3 = $('#spot3').val();
                let spot3_lat = $('#spot3-lat').val();
                let spot3_lng = $('#spot3-lng').val();


                if (name == '') {
                    alert('Ïù¥Î¶ÑÏùÑ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî‚úè')
                    return
                } else if (emoji == 'none') {
                    alert('Ïù¥Î™®ÏßÄÎ•º Í≥®ÎùºÏ£ºÏÑ∏Ïöîüéà')
                    return
                } else if (spot1 == '') {
                    alert('Ïó¨ÌñâÏßÄÎ•º Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöîüöé')
                    return
                } else if (spot2 == '') {
                    alert('Ïó¨ÌñâÏßÄÎ•º Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöîüöé')
                    return
                } else if (spot3 == '') {
                    alert('Ïó¨ÌñâÏßÄÎ•º Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöîüöé')
                    return
                } else {
                    alert('ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!üëè')

                }
                $.ajax({
                    type: "POST",
                    url: "/themes",
                    data: {
                        name: name,
                        emoji: emoji,
                        spot1: spot1,
                        spot1_lat: spot1_lat,
                        spot1_lng: spot1_lng,
                        spot2: spot2,
                        spot2_lat: spot2_lat,
                        spot2_lng: spot2_lng,
                        spot3: spot3,
                        spot3_lat: spot3_lat,
                        spot3_lng: spot3_lng
                    },
                    success: function (response) {
                        if (response["result"] == "success") {
                            window.location.reload();
                        }
                    }
                })
            }

        </script>
    </head>


    <body>
        <section class="hero is-warning is-small" style="height: 100%">
            <div class="hero-body" style="margin-top:140px" ;>
                <div class="container has-text-centered" style="margin-bottom: 100px;">
                    <h1 class="title is-size-1">
                        ÎÇòÏùò Ïó¨Ìñâ ÌÖåÎßà ÎßåÎì§Í∏∞
                    </h1>
                </div>
            </div>
            <div class="wrap">
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">ÌÖåÎßà Ïù¥Î¶Ñ</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <input id="name" class="input" type="text" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">Ïù¥Î™®ÏßÄ</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select id="emoji">
                                        <option value="none">ÏÑ†ÌÉù</option>
                                        <option value="üòÄ">üòÄ</option>
                                        <option value="üòÅ">üòÅ</option>
                                        <option value="üòÇ">üòÇ</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label" onclick="get1()">Ïó¨ÌñâÏßÄ 1</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot1" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot1-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot1-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get1()">
                                    ÌôïÏù∏
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">Ïó¨ÌñâÏßÄ 2</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot2" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot2-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot2-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get2()">
                                    ÌôïÏù∏
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">Ïó¨ÌñâÏßÄ 3</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-horizontal">
                            <div class="control">
                                <input id="spot3" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot3-lat" class="input" type="text" placeholder="">
                            </div>
                            <div class="control">
                                <input id="spot3-lng" class="input lng" type="text" placeholder="">
                            </div>
                            <p class="control">
                                <button class="button is-info" onclick="get3()">
                                    ÌôïÏù∏
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
                <div id="map" style="width:650px;height:400px;margin:auto;"></div>
                <div id="button" class="field is-grouped">
                    <p class="control">
                        <button onclick="formCheck()" class="button is-info">
                            Îì±Î°ùÌïòÍ∏∞
                        </button>
                    </p>
                    <p class="control">
                        <button onclick="location.href = '/'" class="button">
                            ÎèåÏïÑÍ∞ÄÍ∏∞
                        </button>
                    </p>

                </div>
            </div>
        </section>
        <script type="text/javascript"
                src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ef40c66fba33237283cfb59ce3a907aa"></script>
        <script>
            let lat, lng; // Irvin: Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ†Ïñ∏
            let mapContainer = document.getElementById('map'), // ÏßÄÎèÑÎ•º ÌëúÏãúÌï† div
                mapOption = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // ÏßÄÎèÑÏùò Ï§ëÏã¨Ï¢åÌëú
                    level: 3 // ÏßÄÎèÑÏùò ÌôïÎåÄ Î†àÎ≤®
                };

            let map = new kakao.maps.Map(mapContainer, mapOption); // ÏßÄÎèÑÎ•º ÏÉùÏÑ±Ìï©ÎãàÎã§


            // ÏßÄÎèÑ ÌôïÎåÄ Ï∂ïÏÜåÎ•º Ï†úÏñ¥Ìï† Ïàò ÏûàÎäî  Ï§å Ïª®Ìä∏Î°§ÏùÑ ÏÉùÏÑ±Ìï©ÎãàÎã§
            var zoomControl = new kakao.maps.ZoomControl();
            map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

            // ÏßÄÎèÑÎ•º ÌÅ¥Î¶≠Ìïú ÏúÑÏπòÏóê ÌëúÏ∂úÌï† ÎßàÏª§ÏûÖÎãàÎã§
            let marker = new kakao.maps.Marker({
                // ÏßÄÎèÑ Ï§ëÏã¨Ï¢åÌëúÏóê ÎßàÏª§Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
                position: map.getCenter()
            });
            // ÏßÄÎèÑÏóê ÎßàÏª§Î•º ÌëúÏãúÌï©ÎãàÎã§
            marker.setMap(map);

            // ÏßÄÎèÑÏóê ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º Îì±Î°ùÌï©ÎãàÎã§
            // ÏßÄÎèÑÎ•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÎßàÏßÄÎßâ ÌååÎùºÎØ∏ÌÑ∞Î°ú ÎÑòÏñ¥Ïò® Ìï®ÏàòÎ•º Ìò∏Ï∂úÌï©ÎãàÎã§
            kakao.maps.event.addListener(map, 'click', function (mouseEvent) {

                // ÌÅ¥Î¶≠Ìïú ÏúÑÎèÑ, Í≤ΩÎèÑ Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏ÏòµÎãàÎã§
                let latlng = mouseEvent.latLng;

                // ÎßàÏª§ ÏúÑÏπòÎ•º ÌÅ¥Î¶≠Ìïú ÏúÑÏπòÎ°ú ÏòÆÍπÅÎãàÎã§
                marker.setPosition(latlng);

                lat = latlng.getLat();
                lng = latlng.getLng();
                /*var message = 'ÌÅ¥Î¶≠Ìïú ÏúÑÏπòÏùò ÏúÑÎèÑÎäî ' + latlng.getLat() + ' Ïù¥Í≥†, ';
                message += 'Í≤ΩÎèÑÎäî ' + latlng.getLng() + ' ÏûÖÎãàÎã§';

                var resultDiv = document.getElementById('clickLatlng');
                resultDiv.innerHTML = message;*/

            });


        </script>
    </body>
</html>